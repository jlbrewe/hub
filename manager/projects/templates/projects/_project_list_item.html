{% load i18n %}

{% with account=project.account role=project.role %}
{% url 'ui-accounts-retrieve' account.name as account_url %}
{% url 'ui-projects-retrieve' account.name project.name as project_url %}
{% url 'ui-projects-sharing' account.name project.name as project_sharing_url %}
<div class="collection-list--item-contents transition-colors">
  <h2 class="title is-size-5-mobile is-4 leading-loose">
    {# Hide avatar when listing projects on an organization's own account page #}
    {% if account.is_personal or request.path != account_url %}
    <a href="{{ account_url }}">
      <span class="icon is-medium has-tooltip-top has-tooltip-text-centered image-tooltip"
            data-tooltip="Project belongs to @{{ account.name }}">
        <img src="{{ account.image.medium }}" role="presentation"></img>
      </span>
    </a>
    {% endif %}

    <a href="{{ project_url }}" class="has-text-black has-text-link-hover">
      {{ project.title|default:project.name|default:"Untitled Project" }}
    </a>

    {% if project.public == False %}
    <span class="tag is-light">
      <span class="icon">
        <i class="ri-lock-line"></i>
      </span>
      <span>
        {% trans "Private" %}
      </span>
    </span>
    {% endif %}

    {% if role %}
    <a href="{{ project_sharing_url }}" <span
       class="tag is-light {% if role == 'MANAGER' %}has-background-warning-light{% elif role == 'OWNER' %}has-background-danger-light{% endif %} has-tooltip-top has-tooltip-text-centered image-tooltip"
       data-tooltip="{% blocktrans %}You are a {{ role }} on this project{% endblocktrans %}">
      <span class="icon is-small">
        <i class="ri-user{% if role == 'MANAGER' %}-star{% elif role == 'OWNER' %}-settings{% endif %}-line"></i>
      </span>
      </span>
    </a>
    {% endif %}
  </h2>

  {% if project.description %}
  <p class="subtitle is-size-6">
    <a href="{{ project_url }}" class="has-text-black has-text-link-hover">
      {{ project.description|truncatechars:180 }}
    </a>
  </p>
  {% endif %}
</div>
{% endwith %}
