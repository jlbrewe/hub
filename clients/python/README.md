# Stencila Hub Python Client

This Python package provides a client for the Stencila Hub API. It is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) from our [OpenAPI Schema](https://hub.stenci.la/api/schema).

## Authentication

Many endpoints in the Stencila Hub API require an authentication token. These tokens carry many privileges, so be sure to keep them secure. Do not place your tokens in publicly accessible areas such as client-side code. The API is only served over HTTPS to avoid exposing tokens and other data on the network.

To obtain a token, [`POST /api/tokens`](#operations-tokens-tokens_create) with either a `username` and `password` pair, or an [OpenID Connect](https://openid.net/connect/) token. Then use the token in the `Authorization` header of subsequent requests with the prefix `Token` e.g.

    curl -H \"Authorization: Token 48866b1e38a2e9db0baada2140b2327937f4a3636dd5f2dfd8c212341c88d34\" https://hub.stenci.la/api/projects/

Alternatively, you can use `Basic` authentication with the token used as the username and no password. This can be more convenient when using command line tools such as [cURL](https://curl.haxx.se/) e.g.

    curl -u 48866b1e38a2e9db0baada2140b2327937f4a3636dd5f2dfd8c212341c88d34: https://hub.stenci.la/api/projects/

Or, the less ubiquitous, but more accessible [httpie](https://httpie.org/):

    http --auth 48866b1e38a2e9db0baada2140b2327937f4a3636dd5f2dfd8c212341c88d34: https://hub.stenci.la/api/projects/

In both examples above, the trailing colon is not required but avoids being asked for a password.

## Versioning

The Stencila Hub is released using semantic versioning. The current version is available from the [`GET /api/status`](/api/status) endpoint. Please see the [Github release page](https://github.com/stencila/hub/releases) and the [changelog](https://github.com/stencila/hub/blob/master/CHANGELOG.md) for details on each release. We currently do not provide versioning of the API but plan to do so soon (probably by using a `Accept: application/vnd.stencila.hub+json;version=1.0` request header). If you are using, or interested in using, the API please contact us and we may be able to expedite this.


## Requirements.

Python 3.4+ (Will probably work with Python 2.7 but that is not supported).

## Installation & Usage

### Pip

You can install directly using:

```sh
pip3 install git+https://github.com/stencila/hub.git#egg=pkg&subdirectory=client/python
```
(you may need to run `pip` with root permission: `sudo pip install ...`)

Then import the package:

```python
import stencila.hub
```

### Setuptools

Install via [Setuptools](http://pypi.python.org/pypi/setuptools).

```sh
python3 setup.py install --user
```
(or `sudo python setup.py install` to install the package for all users)

Then import the package:

```python
import stencila.hub
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```python
from pprint import pprint

import stencila.hub
from stencila.hub.rest import ApiException

configuration = stencila.hub.Configuration(
    host="https://hub.stenci.la/api",
    api_key={'Token': 'YOUR_API_TOKEN'},
    api_key_prefix={'Token': 'Token'}
)
with stencila.hub.ApiClient(configuration) as api_client:
    api_instance = stencila.hub.ProjectsApi(api_client)
    try:
        api_response = api_instance.projects_list(
            account = 56, # The integer of the id of the account that the project belongs to
            role = 'author+', # The role that the currently authenticated user has on the project
            public = True, # Whether or not the project is public.
            search = 'foo', # A string to search for in the project `name`, `title` or `description`. (optional)
        )
        pprint(api_response)
    except ApiException as e:
        print("Exception when calling ProjectsApi.projects_list: %s\n" % e)
```

## Develop

### Generating client


The generation of the client requires a local instance of the `manager` service to be running. To start that, at the top level of this repo, run

```sh
make -C manager run
```

To regenerate the client, in the folder above this one, run

```sh
make python
```

There are two primary options for customizing the files this package:

1. Override the [Mustache templates](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/python) and place them in the [`templates`](templates) folder

2. Turn off generation by adding the file to [`.openapi-generator-ignore`](.openapi-generator-ignore).


### Running tests

Run tests using,

```sh
tox
```

## API Endpoints

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AccountsApi* | [**accounts_broker_list**](docs/AccountsApi.md#accounts_broker_list) | **GET** /accounts/{account}/broker | Connect to the job broker for the account.
*AccountsApi* | [**accounts_create**](docs/AccountsApi.md#accounts_create) | **POST** /accounts/ | Create an object.
*AccountsApi* | [**accounts_list**](docs/AccountsApi.md#accounts_list) | **GET** /accounts/ | List objects.
*AccountsApi* | [**accounts_partial_update**](docs/AccountsApi.md#accounts_partial_update) | **PATCH** /accounts/{account}/ | Update an object.
*AccountsApi* | [**accounts_queues_list**](docs/AccountsApi.md#accounts_queues_list) | **GET** /accounts/{account}/queues/ | List objects.
*AccountsApi* | [**accounts_queues_read**](docs/AccountsApi.md#accounts_queues_read) | **GET** /accounts/{account}/queues/{queue}/ | Retrieve an object.
*AccountsApi* | [**accounts_read**](docs/AccountsApi.md#accounts_read) | **GET** /accounts/{account}/ | Retrieve an object.
*AccountsApi* | [**accounts_teams_create**](docs/AccountsApi.md#accounts_teams_create) | **POST** /accounts/{account}/teams/ | Create a team.
*AccountsApi* | [**accounts_teams_delete**](docs/AccountsApi.md#accounts_teams_delete) | **DELETE** /accounts/{account}/teams/{team}/ | Destroy a team.
*AccountsApi* | [**accounts_teams_list**](docs/AccountsApi.md#accounts_teams_list) | **GET** /accounts/{account}/teams/ | List teams.
*AccountsApi* | [**accounts_teams_members_create**](docs/AccountsApi.md#accounts_teams_members_create) | **POST** /accounts/{account}/teams/{team}/members/ | 
*AccountsApi* | [**accounts_teams_members_delete**](docs/AccountsApi.md#accounts_teams_members_delete) | **DELETE** /accounts/{account}/teams/{team}/members/{user}/ | 
*AccountsApi* | [**accounts_teams_partial_update**](docs/AccountsApi.md#accounts_teams_partial_update) | **PATCH** /accounts/{account}/teams/{team}/ | Update a team.
*AccountsApi* | [**accounts_teams_read**](docs/AccountsApi.md#accounts_teams_read) | **GET** /accounts/{account}/teams/{team}/ | Retrieve a team.
*AccountsApi* | [**accounts_update_plan**](docs/AccountsApi.md#accounts_update_plan) | **PATCH** /accounts/{account}/update_plan/ | 
*AccountsApi* | [**accounts_users_create**](docs/AccountsApi.md#accounts_users_create) | **POST** /accounts/{account}/users/ | Add an account user.
*AccountsApi* | [**accounts_users_delete**](docs/AccountsApi.md#accounts_users_delete) | **DELETE** /accounts/{account}/users/{user}/ | Remove an account user.
*AccountsApi* | [**accounts_users_list**](docs/AccountsApi.md#accounts_users_list) | **GET** /accounts/{account}/users/ | A view set for account users.
*AccountsApi* | [**accounts_users_partial_update**](docs/AccountsApi.md#accounts_users_partial_update) | **PATCH** /accounts/{account}/users/{user}/ | A view set for account users.
*AccountsApi* | [**accounts_users_read**](docs/AccountsApi.md#accounts_users_read) | **GET** /accounts/{account}/users/{user}/ | A view set for account users.
*AccountsApi* | [**accounts_workers_heartbeats_list**](docs/AccountsApi.md#accounts_workers_heartbeats_list) | **GET** /accounts/{account}/workers/{worker}/heartbeats/ | List objects.
*AccountsApi* | [**accounts_workers_list**](docs/AccountsApi.md#accounts_workers_list) | **GET** /accounts/{account}/workers/ | List objects.
*AccountsApi* | [**accounts_workers_read**](docs/AccountsApi.md#accounts_workers_read) | **GET** /accounts/{account}/workers/{worker}/ | Retrieve an object.
*AccountsApi* | [**accounts_zones_create**](docs/AccountsApi.md#accounts_zones_create) | **POST** /accounts/{account}/zones/ | Create an object.
*AccountsApi* | [**accounts_zones_delete**](docs/AccountsApi.md#accounts_zones_delete) | **DELETE** /accounts/{account}/zones/{zone}/ | Destroy an object.
*AccountsApi* | [**accounts_zones_list**](docs/AccountsApi.md#accounts_zones_list) | **GET** /accounts/{account}/zones/ | List objects.
*AccountsApi* | [**accounts_zones_read**](docs/AccountsApi.md#accounts_zones_read) | **GET** /accounts/{account}/zones/{zone}/ | Retrieve an object.
*InvitesApi* | [**invites_create**](docs/InvitesApi.md#invites_create) | **POST** /invites/ | Create an object.
*InvitesApi* | [**invites_delete**](docs/InvitesApi.md#invites_delete) | **DELETE** /invites/{id}/ | Destroy an object.
*InvitesApi* | [**invites_list**](docs/InvitesApi.md#invites_list) | **GET** /invites/ | List objects.
*JobsApi* | [**jobs_partial_update**](docs/JobsApi.md#jobs_partial_update) | **PATCH** /jobs/{id}/ | Update a job.
*JobsApi* | [**jobs_update**](docs/JobsApi.md#jobs_update) | **PUT** /jobs/{id}/ | A view set intended for the &#x60;overseer&#x60; service to update the status of workers.
*ProjectsApi* | [**projects_agents_create**](docs/ProjectsApi.md#projects_agents_create) | **POST** /projects/{project}/agents/ | Create an object.
*ProjectsApi* | [**projects_agents_delete**](docs/ProjectsApi.md#projects_agents_delete) | **DELETE** /projects/{project}/agents/{agent}/ | Destroy an object.
*ProjectsApi* | [**projects_agents_list**](docs/ProjectsApi.md#projects_agents_list) | **GET** /projects/{project}/agents/ | List objects.
*ProjectsApi* | [**projects_agents_partial_update**](docs/ProjectsApi.md#projects_agents_partial_update) | **PATCH** /projects/{project}/agents/{agent}/ | Update an object.
*ProjectsApi* | [**projects_agents_read**](docs/ProjectsApi.md#projects_agents_read) | **GET** /projects/{project}/agents/{agent}/ | Retrieve an object.
*ProjectsApi* | [**projects_convert**](docs/ProjectsApi.md#projects_convert) | **POST** /projects/{project}/files/{file}!convert | Convert a file to another format.
*ProjectsApi* | [**projects_create**](docs/ProjectsApi.md#projects_create) | **POST** /projects/ | Create a project.
*ProjectsApi* | [**projects_delete**](docs/ProjectsApi.md#projects_delete) | **DELETE** /projects/{project}/ | Destroy a project.
*ProjectsApi* | [**projects_files_delete**](docs/ProjectsApi.md#projects_files_delete) | **DELETE** /projects/{project}/files/{file} | Destroy an object.
*ProjectsApi* | [**projects_files_list**](docs/ProjectsApi.md#projects_files_list) | **GET** /projects/{project}/files/ | List objects.
*ProjectsApi* | [**projects_files_read**](docs/ProjectsApi.md#projects_files_read) | **GET** /projects/{project}/files/{file} | Retrieve an object.
*ProjectsApi* | [**projects_history**](docs/ProjectsApi.md#projects_history) | **GET** /projects/{project}/files/{file}!history | Get the a file&#39;s history.
*ProjectsApi* | [**projects_jobs_cancel**](docs/ProjectsApi.md#projects_jobs_cancel) | **PATCH** /projects/{project}/jobs/{job}/cancel/ | Cancel a job.
*ProjectsApi* | [**projects_jobs_connect_create**](docs/ProjectsApi.md#projects_jobs_connect_create) | **POST** /projects/{project}/jobs/{job}/connect/{path}/ | Connect to a job.
*ProjectsApi* | [**projects_jobs_connect_read**](docs/ProjectsApi.md#projects_jobs_connect_read) | **GET** /projects/{project}/jobs/{job}/connect/{path}/ | Connect to a job.
*ProjectsApi* | [**projects_jobs_create**](docs/ProjectsApi.md#projects_jobs_create) | **POST** /projects/{project}/jobs/ | Create an object.
*ProjectsApi* | [**projects_jobs_execute**](docs/ProjectsApi.md#projects_jobs_execute) | **POST** /projects/{project}/jobs/execute/ | Create an execute job.
*ProjectsApi* | [**projects_jobs_list**](docs/ProjectsApi.md#projects_jobs_list) | **GET** /projects/{project}/jobs/ | List objects.
*ProjectsApi* | [**projects_jobs_partial_update**](docs/ProjectsApi.md#projects_jobs_partial_update) | **PATCH** /projects/{project}/jobs/{job}/ | Update an object.
*ProjectsApi* | [**projects_jobs_read**](docs/ProjectsApi.md#projects_jobs_read) | **GET** /projects/{project}/jobs/{job}/ | Retrieve an object.
*ProjectsApi* | [**projects_list**](docs/ProjectsApi.md#projects_list) | **GET** /projects/ | List projects.
*ProjectsApi* | [**projects_partial_update**](docs/ProjectsApi.md#projects_partial_update) | **PATCH** /projects/{project}/ | Update a project.
*ProjectsApi* | [**projects_pull**](docs/ProjectsApi.md#projects_pull) | **POST** /projects/{project}/pull/ | Pull the project.
*ProjectsApi* | [**projects_read**](docs/ProjectsApi.md#projects_read) | **GET** /projects/{project}/ | Retrieve a project.
*ProjectsApi* | [**projects_snapshots_archive**](docs/ProjectsApi.md#projects_snapshots_archive) | **GET** /projects/{project}/snapshots/{snapshot}/archive/ | Retrieve an archive for a project snapshot.
*ProjectsApi* | [**projects_snapshots_create**](docs/ProjectsApi.md#projects_snapshots_create) | **POST** /projects/{project}/snapshots/ | Create an object.
*ProjectsApi* | [**projects_snapshots_delete**](docs/ProjectsApi.md#projects_snapshots_delete) | **DELETE** /projects/{project}/snapshots/{snapshot}/ | Destroy an object.
*ProjectsApi* | [**projects_snapshots_files**](docs/ProjectsApi.md#projects_snapshots_files) | **GET** /projects/{project}/snapshots/{snapshot}/files/{path}/ | Retrieve a file within a snapshot of the project.
*ProjectsApi* | [**projects_snapshots_list**](docs/ProjectsApi.md#projects_snapshots_list) | **GET** /projects/{project}/snapshots/ | List objects.
*ProjectsApi* | [**projects_snapshots_read**](docs/ProjectsApi.md#projects_snapshots_read) | **GET** /projects/{project}/snapshots/{snapshot}/ | Retrieve an object.
*ProjectsApi* | [**projects_snapshots_session**](docs/ProjectsApi.md#projects_snapshots_session) | **POST** /projects/{project}/snapshots/{snapshot}/session/ | Get a session with the snapshot as the working directory.
*ProjectsApi* | [**projects_sources_create**](docs/ProjectsApi.md#projects_sources_create) | **POST** /projects/{project}/sources/ | Create a project source.
*ProjectsApi* | [**projects_sources_delete**](docs/ProjectsApi.md#projects_sources_delete) | **DELETE** /projects/{project}/sources/{source}/ | Destroy a project source.
*ProjectsApi* | [**projects_sources_list**](docs/ProjectsApi.md#projects_sources_list) | **GET** /projects/{project}/sources/ | List a project&#39;s sources.
*ProjectsApi* | [**projects_sources_open**](docs/ProjectsApi.md#projects_sources_open) | **GET** /projects/{project}/sources/{source}/open/{path}/ | Open a project source, or a file within it.
*ProjectsApi* | [**projects_sources_partial_update**](docs/ProjectsApi.md#projects_sources_partial_update) | **PATCH** /projects/{project}/sources/{source}/ | Update a project source.
*ProjectsApi* | [**projects_sources_pull**](docs/ProjectsApi.md#projects_sources_pull) | **POST** /projects/{project}/sources/{source}/pull/ | Pull a project source.
*ProjectsApi* | [**projects_sources_read**](docs/ProjectsApi.md#projects_sources_read) | **GET** /projects/{project}/sources/{source}/ | Retrieve a project source.
*StatusApi* | [**status_read**](docs/StatusApi.md#status_read) | **GET** /status/ | 
*TokensApi* | [**tokens_create**](docs/TokensApi.md#tokens_create) | **POST** /tokens/ | Create an authentication token.
*TokensApi* | [**tokens_delete**](docs/TokensApi.md#tokens_delete) | **DELETE** /tokens/{token}/ | Destroy an authentication token.
*TokensApi* | [**tokens_list**](docs/TokensApi.md#tokens_list) | **GET** /tokens/ | List authentication tokens.
*TokensApi* | [**tokens_read**](docs/TokensApi.md#tokens_read) | **GET** /tokens/{token}/ | Retrieve and refresh an authentication token.
*UsersApi* | [**users_list**](docs/UsersApi.md#users_list) | **GET** /users/ | List users.
*UsersApi* | [**users_me**](docs/UsersApi.md#users_me) | **GET** /users/me/ | Retrieve the current user.
*UsersApi* | [**users_read**](docs/UsersApi.md#users_read) | **GET** /users/{id}/ | Retrieve a user.
*WorkersApi* | [**workers_heartbeat**](docs/WorkersApi.md#workers_heartbeat) | **POST** /workers/heartbeat/ | Create a worker heartbeat.
*WorkersApi* | [**workers_offline**](docs/WorkersApi.md#workers_offline) | **POST** /workers/offline/ | Record that a worker has gone offline.
*WorkersApi* | [**workers_online**](docs/WorkersApi.md#workers_online) | **POST** /workers/online/ | Record that a worker has come online.
*WorkersApi* | [**workers_partial_update**](docs/WorkersApi.md#workers_partial_update) | **PATCH** /workers/{hostname}/ | Update information on the worker.

