{% comment %}
A partial for displaying a source (with updating, via polling).

This is a partial mainly because it is self-replacing (see below).

If the source is active then will have `hx-trigger="every 2s"` so that it's status,
results etc get updated. Uses `hx-swap="outerHTML"` so that the trigger
is removed when the source is inactive. Also includes the source as JSON data
in case the enclosing page want to use that data to trigger further events
(e.g. when the source is ended).
{% endcomment %}

{% load i18n humanize stencila %}

<div {% if source.is_active %} hx-trigger="every 2s"
     hx-get="{% url 'api-projects-sources-detail' source.project.id source.id %}"
     hx-template="projects/sources/_retrieve.html" hx-swap="outerHTML" {% endif %}>

  {% include "../files/_list.html" with files=source.files.all %}

  {{ serializer.data|json_script:"source-data" }}
</div>
